\title{Type Families}
\taxon{Module}
\date{2026-02-18}
\author{fredrikbakke}

\import{stt-macros}

%```agda
\agda{
module Foundations.TypeFamilies where

open import Foundations.Universes
open import Foundations.Sigma
open import Foundations.CoherentIsomorphism

Fam : (l1 l2 : Level) → Type (lsuc l1 ⊔ lsuc l2)
Fam l1 l2 = Σ (Type l1) (λ X → X → Type l2)

DepFam
  : {l1 l2 : Level}
  → (l3 l4 : Level)
  → Fam l1 l2
  → Type (l1 ⊔ lsuc l3 ⊔ lsuc l4)
DepFam l3 l4 (A , B) = Σ (A → Type l3) (λ X → (a : A) → X a → Type l4)

Dep²Fam
  : {l1 l2 l3 l4 : Level}
  → (l5 l6 : Level)
  → (F : Fam l1 l2)
  → DepFam l3 l4 F
  → Type (l1 ⊔ l3 ⊔ lsuc l5 ⊔ lsuc l6)
Dep²Fam l5 l6 (A , B) (X , Y)
  = Σ ((a : A) → X a → Type l5)
      (λ U → (a : A) (x : X a) → U a x → Type l6)

module _
  {l1 l2 l3 l4 : Level}
  (F@(A , B) : Fam l1 l2)
  (G@(X , Y) : Fam l3 l4)
  where

  equiv-Fam : Type (l1 ⊔ l2 ⊔ l3 ⊔ l4)
  equiv-Fam = Σ (A ≃ X) (λ e → (a : A) → B a ≃ Y (e ._≃_.fwd a))
}
%```
