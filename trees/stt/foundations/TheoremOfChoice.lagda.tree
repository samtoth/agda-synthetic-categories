\date{2025-03-06}
\author{samueltoth}
\title{The type theoretic theorem of choice}

% HoTT 2.15.7

\import{stt-macros}

% ```agda
\agda{
module foundations.TheoremOfChoice where

open import foundations.universe
open import foundations.Sigma
open import foundations.QuasiIsomorphism
open import foundations.CoherentIsomorphism
open import foundations.FunctionInverses
open import foundations.Functions
open import foundations.Identity
}
% ```

##{
\Pi_{(x : X)} \Sigma_{(a : A(x))} P(x, a) \to \Sigma_{(g : \Pi_{(x : X)} A(x))} \Pi_{(x : X)} P(x, g(x))
}

% ```agda
\agda{

Î£-Î -swap : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {X : Type ğ“¤} (A : X â†’ Type ğ“¥) (P : (x : X) â†’ A x â†’ Type ğ“¦)
         â†’ ((x : X) â†’ Î£[ a âˆ¶ A x ] P x a) â†’ (Î£[ f âˆ¶ ((x : X) â†’ A x) ] âˆ€ (x : X) â†’ P x (f x)) 
Î£-Î -swap _ _ f = (fst âˆ˜ f , snd âˆ˜ f)


Î£-Î -swap-is-equiv : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {X : Type ğ“¤} {A : X â†’ Type ğ“¥} {P : (x : X) â†’ A x â†’ Type ğ“¦}
         â†’ is-equiv (Î£-Î -swap A P)
Î£-Î -swap-is-equiv = qisoâ†’is-equiv lem where
  lem : quasi-iso (Î£-Î -swap _ _)
  lem .fst (f , g) x = (f x , g x)
  lem .snd .fst _ = refl
  lem .snd .snd _ = refl

Î£-Î -swapâ‰ƒ : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {X : Type ğ“¤} (A : X â†’ Type ğ“¥) (P : (x : X) â†’ A x â†’ Type ğ“¦)
         â†’ ((x : X) â†’ Î£[ a âˆ¶ A x ] P x a) â‰ƒ (Î£[ f âˆ¶ ((x : X) â†’ A x) ] âˆ€ (x : X) â†’ P x (f x)) 
Î£-Î -swapâ‰ƒ A P = Î£-Î -swap A P , Î£-Î -swap-is-equiv 

}
% ```
