\date{2025-06-02}
\author{samueltoth}
\title{Fibres of maps given by pre/post-composition}
\taxon{module}
\meta{module}{\startverb foundations.CompositionFibres \stopverb}

\import{stt-macros}

%```agda
\agda{
open import foundations.FunExt

module foundations.CompositionFibres (FE : FunExt-global) where

open import foundations.Universes
open import foundations.QuasiIsomorphism
open import foundations.CoherentIsomorphism
open import foundations.Functions
open import foundations.Sigma
open import foundations.SigmaPath
open import foundations.Identity

open WithFunExt-global FE
}
%```

\subtree[stt-004P]{
\title{Fibres of the precomposition map}
\taxon{theorem}

%```agda
\agda{
fibre-precompâ‰ƒ : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥}
                 {C : Type ğ“¦} (f : A â†’ B) (h : C â†’ B)
                 â†’ fibre (precomp C f) h â‰ƒ  Î  C (fibre f âˆ˜ h)
fibre-precompâ‰ƒ f h = mkâ‰ƒ fwd (is-equivâ†qiso fwd-qiso) where
  fwd : fibre (precomp _ f) h â†’ Î  _ (fibre f âˆ˜ h)
  fwd (g , p) c = (g c , happly p c)

  fwd-qiso : quasi-iso fwd
  fwd-qiso .fst g = (fst âˆ˜ g , funextâ†’ (snd âˆ˜ g))
  fwd-qiso .snd .fst (h , p) = Î£-pathâ†’ (refl , (_â‰ƒ_.Î· funextâ‰ƒ p))
  fwd-qiso .snd .snd g = funextâ†’ (Î»
                            a â†’ Î£-pathâ†’ ( refl
                                        , happly (_â‰ƒ_.Îµ funextâ‰ƒ (snd âˆ˜ g)) a)
                                        )
}
%```

}
