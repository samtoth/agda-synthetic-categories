\title{(Pre)Postwhiskering}
\date{2025-06-26}
\author{samueltoth}
\taxon{Module}
\import{stt-macros}

%```agda
\agda{
module Core.Postwhisker where

open import Foundations.Prelude
open import ufAxioms
open import Core.Arrow
open import Core.ArrowEquiv
}
%```


\subtree[stt-006G]{
\title{Postwhiskering a homotopy}
\taxon{Definition}


%```agda
\agda{
postwhisker : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥}
                {X : Type ğ“¦} (f : A â†’ B)
                (g h : B â†’ X)
              â†’ g ~ h â†’ g âˆ˜ f ~ h âˆ˜ f
postwhisker f g h = _â–¸ f

prewhisker : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥}
               {X : Type ğ“¦} (f : A â†’ B)
               (g h : X â†’ A)
             â†’ g ~ h â†’ f âˆ˜ g ~ f âˆ˜ h
prewhisker f g h = f â—‚_
}
%```
}


\subtree[stt-006I]{
\title{Funext for Postwhsikering}
\taxon{Theorem}

\p{Let #{f : A \to B}, and #{g,h : B \to C}, then
postwhiskering by #{f} is an equivalence iff #{\rm{ap}_{- \circ f}^{g,h}} is.}

%```agda
\agda{
postwhiskerâ†ap-compose : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥}
            {C : Type ğ“¦}
           (f : A â†’ B)
           (g h : B â†’ C)
         â†’ Arrow-map
             (ap (postcomp C f) {g} {h})
             (postwhisker f g h)
postwhiskerâ†ap-compose _ _ _ .Arrow-map.top = happly
postwhiskerâ†ap-compose _ _ _ .Arrow-map.bot = happly
postwhiskerâ†ap-compose _ _ _ .Arrow-map.comm refl = refl

postwhisker-funext : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥}
                    {C : Type ğ“¦}
                    {f : A â†’ B}
                    {g h : B â†’ C}
                  â†’ is-Arrow-equiv (postwhiskerâ†ap-compose f g h)
postwhisker-funext .fst = global-funext
postwhisker-funext .snd = global-funext


postwhisker-is-equivâ†ap-compose
  : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥}
      {C : Type ğ“¦}
      {f : A â†’ B}
      {g h : B â†’ C}
    â†’ is-equiv (ap (postcomp C f) {g} {h})
    â†’ is-equiv (postwhisker f g h)
postwhisker-is-equivâ†ap-compose e
  = is-equivâ†Arrow-equiv {F = postwhiskerâ†ap-compose _ _ _}
                         postwhisker-funext
                         e

}
%```
}

\subtree[stt-00B4]{
\title{Postcomposing commutes with funext}
\taxon{Lemma}

%```agda
\agda{
commutes-postwhisker-funext : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥} {Q : Type ğ“¦}
                   {f : Q â†’ A}
                   {g h : A â†’ B}
                   â†’ funextâ†’ âˆ˜ postwhisker f g h ~ ap (postcomp B f) âˆ˜ funextâ†’
commutes-postwhisker-funext = funext-rec _ Î»
  where refl â†’ funext-refl âˆ™ sym (ap (ap _) funext-refl)

commutes-prewhisker-funext : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥} {Q : Type ğ“¦}
                   {f g : Q â†’ A}
                   {h : A â†’ B}
                   â†’ funextâ†’ âˆ˜ prewhisker h f g ~ ap (precomp Q h) âˆ˜ funextâ†’
commutes-prewhisker-funext = funext-rec _ Î»
  where refl â†’ funext-refl âˆ™ sym (ap (ap _) funext-refl)
}
%```
}

\subtree[stt-006H]{
\title{Postwhiskering by an equiavalence is an equivalence}
\taxon{Corollary}

%```agda
\agda{
opaque
  postwhisker-equiv-is-equiv
    : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {B : Type ğ“¥}
        {f : A â†’ B} â†’ is-equiv f
      â†’ âˆ€ {C : Type ğ“¦} {g h : B â†’ C}
        â†’ is-equiv (postwhisker f g h)
  postwhisker-equiv-is-equiv e
    = postwhisker-is-equivâ†ap-compose
       (is-embeddingâ†is-equiv (postcomp-equiv e))
}
%```
}
