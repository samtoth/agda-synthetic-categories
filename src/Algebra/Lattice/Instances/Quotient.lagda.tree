\title{Quotients of a lattice}
\taxon{Module}
\author{markwilliams}
\date{2025-12-14}
\import{stt-macros}

%```agda
\agda{
module Algebra.Lattice.Instances.Quotient where

open import Foundations.Prelude
open import ufAxioms
open import Core.SetQuotients
open import Modalities.Instances.Truncation
open import Algebra.Lattice
}
%```

\subtree[wil-0002]{
\title{Quotient Lattices}
\taxon{Definition}

\p{Given a lattice #{L} and a congruence #{\sim} on #{L}, the set
  quotient #{L / \sim} has an induced lattice structure.}

%```agda
\agda{
module _ {ùì§ ùì•}
         {A : Type ùì§}
         (L : Lattice A)
         {R : A ‚Üí A ‚Üí Type ùì•}
         (C : LatticeCongruence L R)
         where
  open Lattice L
  open LatticeCongruence C

  private
    _Q‚àß_ : A / R ‚Üí A / R ‚Üí A / R
    (_Q‚àß_) = Quot-rec‚ÇÇ (Œª x y ‚Üí Œπ-quot (x ‚àß y))
                       (Œª where (x , y , r) z ‚Üí glue-quot (~-‚àß r reflexive))
                       (Œª where x (y , z , r) ‚Üí glue-quot (~-‚àß reflexive r))
    _Q‚à®_ : A / R ‚Üí A / R ‚Üí A / R
    (_Q‚à®_) = Quot-rec‚ÇÇ (Œª x y ‚Üí Œπ-quot (x ‚à® y))
                       (Œª where (x , y , r) z ‚Üí glue-quot (~-‚à® r reflexive))
                       (Œª where x (y , z , r) ‚Üí glue-quot (~-‚à® reflexive r))

  QuotLattice :  Lattice (A / R)
  QuotLattice .Lattice.0l = Œπ-quot 0l
  QuotLattice .Lattice.1l = Œπ-quot 1l
  QuotLattice .Lattice._‚àß_ = _Q‚àß_
  QuotLattice .Lattice._‚à®_ = _Q‚à®_

  QuotLattice .Lattice.str-is-lattice .is-lattice.car-is-set = trunc!

  QuotLattice .Lattice.str-is-lattice .is-lattice.‚àß-assoc {x} {y} {z} =
    Quot-elim-prop (Œª x' ‚Üí Quot-elim-prop (Œª y' ‚Üí Quot-elim-prop (Œª z' ‚Üí
      Œπ-quot x' Q‚àß (Œπ-quot y' Q‚àß Œπ-quot z') Ôºù‚ü® ap (Œπ-quot x' Q‚àß_) (Quot-rec‚ÇÇŒ≤ _ _ _ y' z') ‚ü©
      Œπ-quot x' Q‚àß (Œπ-quot (y' ‚àß z'))       Ôºù‚ü® Quot-rec‚ÇÇŒ≤ _ _ _ x' (y' ‚àß z') ‚ü©
      Œπ-quot (x' ‚àß (y' ‚àß z'))               Ôºù‚ü® ap Œπ-quot ‚àß-assoc ‚ü©
      Œπ-quot ((x' ‚àß y') ‚àß z')               Ôºù‚ü® sym (Quot-rec‚ÇÇŒ≤ _ _ _ (x' ‚àß y') z') ‚ü©
      Œπ-quot (x' ‚àß y') Q‚àß Œπ-quot z'         Ôºù‚ü®  ap (_Q‚àß Œπ-quot z') (sym (Quot-rec‚ÇÇŒ≤ _ _ _ x' y')) ‚ü©
      (Œπ-quot x' Q‚àß Œπ-quot y') Q‚àß Œπ-quot z' ‚àé
      ))) x y z

  QuotLattice .Lattice.str-is-lattice .is-lattice.‚à®-assoc {x} {y} {z} =
    Quot-elim-prop (Œª x' ‚Üí Quot-elim-prop (Œª y' ‚Üí Quot-elim-prop (Œª z' ‚Üí
      Œπ-quot x' Q‚à® (Œπ-quot y' Q‚à® Œπ-quot z') Ôºù‚ü® ap (Œπ-quot x' Q‚à®_) (Quot-rec‚ÇÇŒ≤ _ _ _ y' z') ‚ü©
      Œπ-quot x' Q‚à® (Œπ-quot (y' ‚à® z'))       Ôºù‚ü® Quot-rec‚ÇÇŒ≤ _ _ _ x' (y' ‚à® z') ‚ü©
      Œπ-quot (x' ‚à® (y' ‚à® z'))               Ôºù‚ü® ap Œπ-quot ‚à®-assoc ‚ü©
      Œπ-quot ((x' ‚à® y') ‚à® z')               Ôºù‚ü® sym (Quot-rec‚ÇÇŒ≤ _ _ _ (x' ‚à® y') z') ‚ü©
      Œπ-quot (x' ‚à® y') Q‚à® Œπ-quot z'         Ôºù‚ü®  ap (_Q‚à® Œπ-quot z') (sym (Quot-rec‚ÇÇŒ≤ _ _ _ x' y')) ‚ü©
      (Œπ-quot x' Q‚à® Œπ-quot y') Q‚à® Œπ-quot z' ‚àé
      ))) x y z

  QuotLattice .Lattice.str-is-lattice .is-lattice.‚àß-comm {x} {y} =
    (Quot-elim-prop Œª x' ‚Üí Quot-elim-prop Œª y' ‚Üí
      Œπ-quot x' Q‚àß Œπ-quot y' Ôºù‚ü® Quot-rec‚ÇÇŒ≤ _ _ _ x' y' ‚ü©
      Œπ-quot (x' ‚àß y')       Ôºù‚ü® ap Œπ-quot ‚àß-comm ‚ü©
      Œπ-quot (y' ‚àß x')       Ôºù‚ü® sym (Quot-rec‚ÇÇŒ≤ _ _ _ y' x') ‚ü©
      Œπ-quot y' Q‚àß Œπ-quot x' ‚àé ) x y


  QuotLattice .Lattice.str-is-lattice .is-lattice.‚à®-comm {x} {y} =
    (Quot-elim-prop Œª x' ‚Üí Quot-elim-prop Œª y' ‚Üí
      Œπ-quot x' Q‚à® Œπ-quot y' Ôºù‚ü® Quot-rec‚ÇÇŒ≤ _ _ _ x' y' ‚ü©
      Œπ-quot (x' ‚à® y')       Ôºù‚ü® ap Œπ-quot ‚à®-comm ‚ü©
      Œπ-quot (y' ‚à® x')       Ôºù‚ü® sym (Quot-rec‚ÇÇŒ≤ _ _ _ y' x') ‚ü©
      Œπ-quot y' Q‚à® Œπ-quot x' ‚àé ) x y

  QuotLattice .Lattice.str-is-lattice .is-lattice.‚à®-‚àß-abs {x} {y} =
    (Quot-elim-prop Œª x' ‚Üí Quot-elim-prop Œª y' ‚Üí
      Œπ-quot x' Q‚à® (Œπ-quot x' Q‚àß Œπ-quot y') Ôºù‚ü® ap (Œπ-quot x' Q‚à®_) (Quot-rec‚ÇÇŒ≤ _ _ _ x' y') ‚ü©
      Œπ-quot x' Q‚à® (Œπ-quot (x' ‚àß y'))       Ôºù‚ü® Quot-rec‚ÇÇŒ≤ _ _ _ x' (x' ‚àß y') ‚ü©
      Œπ-quot (x' ‚à® (x' ‚àß y'))               Ôºù‚ü® ap Œπ-quot ‚à®-‚àß-abs ‚ü©
      Œπ-quot x' ‚àé) x y


  QuotLattice .Lattice.str-is-lattice .is-lattice.‚àß-‚à®-abs {x} {y} =
    (Quot-elim-prop Œª x' ‚Üí Quot-elim-prop Œª y' ‚Üí
      Œπ-quot x' Q‚àß (Œπ-quot x' Q‚à® Œπ-quot y') Ôºù‚ü® ap (Œπ-quot x' Q‚àß_) (Quot-rec‚ÇÇŒ≤ _ _ _ x' y') ‚ü©
      Œπ-quot x' Q‚àß (Œπ-quot (x' ‚à® y'))       Ôºù‚ü® Quot-rec‚ÇÇŒ≤ _ _ _ x' (x' ‚à® y') ‚ü©
      Œπ-quot (x' ‚àß (x' ‚à® y'))               Ôºù‚ü® ap Œπ-quot ‚àß-‚à®-abs ‚ü©
      Œπ-quot x' ‚àé) x y

  QuotLattice .Lattice.str-is-lattice .is-lattice.0-bottom {x} =
    (Quot-elim-prop Œª x' ‚Üí
      Œπ-quot x' Q‚à® Œπ-quot 0l Ôºù‚ü® Quot-rec‚ÇÇŒ≤ _ _ _ x' 0l ‚ü©
      Œπ-quot (x' ‚à® 0l)       Ôºù‚ü® ap Œπ-quot 0-bottom ‚ü©
      Œπ-quot x' ‚àé) x

  QuotLattice .Lattice.str-is-lattice .is-lattice.1-top {x} =
    (Quot-elim-prop Œª x' ‚Üí
      Œπ-quot x' Q‚àß Œπ-quot 1l Ôºù‚ü® Quot-rec‚ÇÇŒ≤ _ _ _ x' 1l ‚ü©
      Œπ-quot (x' ‚àß 1l)       Ôºù‚ü® ap Œπ-quot 1-top ‚ü©
      Œπ-quot x' ‚àé) x
}
%```

}
