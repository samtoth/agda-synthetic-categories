\date{2026-02-23}
\author{fredrikbakke}
\title{Null-homotopies}
\taxon{Module}

\import{stt-macros}

%```agda
\agda{
open import Foundations.FunExt

module Foundations.NullHomotopy (FE : FunExt-global) where

open import Foundations.Universes
open import Foundations.QuasiIsomorphism
open import Foundations.CoherentIsomorphism
open import Foundations.CompositionEquiv FE
open import Foundations.Functions
open import Foundations.Homotopy
open import Foundations.Sigma
open import Foundations.SigmaPath
open import Foundations.SigmaProperties
open import Foundations.FibrewiseEquiv
open import Foundations.Identity
open import Foundations.IdentityEquiv
open import Foundations.DependentIdentity
open import Foundations.EquivProp FE

open WithFunExt-global FE
}
%```

\subtree{
\title{Null-homotopies}
\taxon{Definition}

\p{
Given a map #{f : A â†’ B} then its type of \em{null-homotopies} is
#{Î£ (b : B), ((a : A) â†’ f\,a = b)}.
}

%```agda
\agda{
module _
  {ğ“¤1 ğ“¤2 : Level}
  {A : Type ğ“¤1}
  {B : Type ğ“¤2}
  where

  fam-null-homotopy : (A â†’ B) â†’ B â†’ Type (ğ“¤1 âŠ” ğ“¤2)
  fam-null-homotopy f b = (a : A) â†’ f a ï¼ b

  null-homotopy : (A â†’ B) â†’ Type (ğ“¤1 âŠ” ğ“¤2)
  null-homotopy f = Î£[ b âˆ¶ B ] (fam-null-homotopy f b)

  null-homotopy-path-coe-fam-null-homotopy
    : {f : A â†’ B}
      {c l : B}
      (h : fam-null-homotopy f c)
      (t : c ï¼ l)
    â†’ (Î» a â†’ h a âˆ™ t) ï¼ coe (ap (fam-null-homotopy f) t) h
  null-homotopy-path-coe-fam-null-homotopy h refl = funextâ†’ (Î» a â†’ âˆ™-reflr (h a))

  null-homotopy-path-IdPâ‰ƒpointwise
    : {f : A â†’ B}
      {c l : B}
      (h : fam-null-homotopy f c)
      (r : fam-null-homotopy f l)
      (t : c ï¼ l)
    â†’ IdP (ap (fam-null-homotopy f) t) h r â‰ƒ ((a : A) â†’ h a âˆ™ t ï¼ r a)
  null-homotopy-path-IdPâ‰ƒpointwise {f = f} h r t
    = IdP (ap (fam-null-homotopy f) t) h r
      â‰ƒâŸ¨ ï¼-postcomp-â‰ƒ (null-homotopy-path-coe-fam-null-homotopy h t) âŸ©
      ((Î» a â†’ h a âˆ™ t) ï¼ r)
      â‰ƒâŸ¨ funextâ‰ƒ âŸ©
      ((a : A) â†’ h a âˆ™ t ï¼ r a)
      â‰ƒâˆ

  null-homotopy-pathâ‰ƒ
    : {f : A â†’ B}
      {c l : B}
      (h : f ~ const B A c)
      (r : f ~ const B A l)
    â†’ ((c , h) ï¼ (l , r))
    â‰ƒ (Î£[ t âˆ¶ c ï¼ l ] ((a : A) â†’ h a âˆ™ t ï¼ r a))
  null-homotopy-pathâ‰ƒ {f = f} {c} {l} h r
    = ((c , h) ï¼ (l , r))
      â‰ƒâŸ¨ Î£-path eâ»Â¹ âŸ©
      (Î£[ t âˆ¶ c ï¼ l ] IdP (ap (fam-null-homotopy f) t) h r)
      â‰ƒâŸ¨ Î£-ap-â‰ƒ (null-homotopy-path-IdPâ‰ƒpointwise h r) âŸ©
      (Î£[ t âˆ¶ c ï¼ l ] ((a : A) â†’ h a âˆ™ t ï¼ r a))
      â‰ƒâˆ
}
%```
}

\subtree{
\title{The action on identifications of null-homotopic maps is null-homotopic}
\taxon{Proposition}

\p{
If #{f : A â†’ B} is null-homotopic, then for any #{x,y : A}, the induced map on paths
#{\ap f : (x = y) â†’ (f\,x = f\,y)} is null-homotopic.
}

%```agda
\agda{
ap-null-homotopy
  : âˆ€ {ğ“¤ ğ“¥}
      {A : Type ğ“¤}
      {B : Type ğ“¥}
      {f : A â†’ B}
    â†’ null-homotopy f
    â†’ (x y : A)
    â†’ null-homotopy (ap f {x} {y})
ap-null-homotopy {f = f} (b , h) x y
  = h x âˆ™ sym (h y)
  , J (Î» y p â†’ ap f p ï¼ h x âˆ™ sym (h y)) (sym (âˆ™-sym (h x)))
}
%```
}

\subtree{
\title{A null-homotopy presentation of domains of maps}
\taxon{Construction}

\p{
Given #{g : X â†’ Y} and a type #{A}, then #{X} is equivalent to the data consisting of
a point #{y : Y}, a map #{j : A â†’ \fibre{g}{y}}, and a null-homotopy of #{j}.
}

##{X â‰ƒ Î£_{(y : Y)} Î£_{(j : A â†’ \fibre{g}{y})}\,\nullhtpy(j)}

%```agda
\agda{
module _
  {ğ“¤ ğ“¥ ğ“¦} (A : Type ğ“¤) {X : Type ğ“¥} {Y : Type ğ“¦} (g : X â†’ Y)
  where

  fibre-pointed-total : Type (ğ“¤ âŠ” ğ“¥ âŠ” ğ“¦)
  fibre-pointed-total
    = Î£[ y âˆ¶ Y ] Î£[ j âˆ¶ (A â†’ fibre g y) ] null-homotopy j

  fibre-pointed-totalâ†domain : X â†’ fibre-pointed-total
  fibre-pointed-totalâ†domain x
    = g x , const (fibre g (g x)) A (x , refl) , (x , refl) , ~refl

  domainâ†fibre-pointed-total : fibre-pointed-total â†’ X
  domainâ†fibre-pointed-total (_ , _ , y , _) = fst y

  domainâ†fibre-pointed-total-qiso : quasi-iso domainâ†fibre-pointed-total
  domainâ†fibre-pointed-total-qiso .fst = fibre-pointed-totalâ†domain
  domainâ†fibre-pointed-total-qiso .snd .fst (.(g x) , j , (x , refl) , H)
    = funext-rec
        (Î» H' â†’ fibre-pointed-totalâ†domain x ï¼ (g x , j , (x , refl) , H'))
        (Î» where refl â†’ refl)
        H
  domainâ†fibre-pointed-total-qiso .snd .snd x = refl

  fibre-pointed-totalâ‰ƒdomain : fibre-pointed-total â‰ƒ X
  fibre-pointed-totalâ‰ƒdomain
    = mkâ‰ƒ domainâ†fibre-pointed-total
          (is-equivâ†qiso domainâ†fibre-pointed-total-qiso)
}
%```
}


\subtree{
\title{Postcomposition preserves null-homotopies}
\taxon{Proposition}

% ```agda
\agda{
module _
  {ğ“¤1 ğ“¤2 ğ“¤3}
  {A : Type ğ“¤1}
  {B : Type ğ“¤2}
  {C : Type ğ“¤3}
  (e : A â‰ƒ B)
  (j : A â†’ C)
  where

  homotopy-const-postcomp-â‰ƒ
    : (y : C)
    â†’ (j ~ const C A y)
    â‰ƒ (((postcomp-â‰ƒ e eâ»Â¹) ._â‰ƒ_.fwd j) ~ const C B y)
  homotopy-const-postcomp-â‰ƒ y
    = (j ~ const C A y)                             â‰ƒâŸ¨âŸ©
      ((a : A) â†’ j a ï¼ y)                           â‰ƒâŸ¨ postcomp-Î -â‰ƒ (Î» a â†’ j a ï¼ y) (e eâ»Â¹) âŸ©
      ((b : B) â†’ j ((_â‰ƒ_.fwd (e eâ»Â¹)) b) ï¼ y)       â‰ƒâŸ¨âŸ©
      ((postcomp-â‰ƒ e eâ»Â¹) ._â‰ƒ_.fwd j ~ const C B y) â‰ƒâˆ

  null-homotopy-postcomp-â‰ƒ
    : null-homotopy j
    â‰ƒ null-homotopy ((postcomp-â‰ƒ e eâ»Â¹) ._â‰ƒ_.fwd j)
  null-homotopy-postcomp-â‰ƒ
    = Î£-ap-â‰ƒ homotopy-const-postcomp-â‰ƒ
}
% ```
}

\subtree{
\title{Equivalences on codomains preserve null-homotopies}
\taxon{Proposition}

% ```agda
\agda{
module _
  {ğ“¤1 ğ“¤2 ğ“¤3}
  {A : Type ğ“¤1}
  {C : Type ğ“¤2}
  {D : Type ğ“¤3}
  (e : C â‰ƒ D)
  (j : A â†’ C)
  where

  null-homotopy-map-codomain-â‰ƒ
    : null-homotopy j
    â‰ƒ null-homotopy (e ._â‰ƒ_.fwd âˆ˜ j)
  null-homotopy-map-codomain-â‰ƒ
    = null-homotopy j
      â‰ƒâŸ¨ Î£-ap-â‰ƒ (Î» y â†’ Î -ap-â‰ƒ (Î» a â†’ ï¼-equiv e)) âŸ©
      (Î£[ y âˆ¶ C ] ((a : A) â†’ e ._â‰ƒ_.fwd (j a) ï¼ e ._â‰ƒ_.fwd y))
      â‰ƒâŸ¨ Î£-ap-â‰ƒ-fst e âŸ©
      null-homotopy (e ._â‰ƒ_.fwd âˆ˜ j)
      â‰ƒâˆ
}
% ```
}
