\date{2025-02-24}
\title{Characterising the path space of fibre types}
\taxon{Module}
\author{samueltoth}
\import{stt-macros}

% ```agda
\agda{
module Foundations.FibrePath where

open import Foundations.Universes
open import Foundations.Sigma
open import Foundations.SigmaPath
open import Foundations.FibrewiseEquiv
open import Foundations.Functions
open import Foundations.QuasiIsomorphism
open import Foundations.CoherentIsomorphism
open import Foundations.Identity
open import Foundations.DependentIdentity
}
% ```

\p{Although [fibres](stt-000M) are defined as sigma types - [who's path types can be characterised](Foundations.SigmaPath) - we can give a
particular special charecterisation of the path space of fibre types that will come in handy especially in proving that certain maps
have contractible or propositional fibres.
}

\subtree[stt-000N]{
\taxon{Theorem}


\p{Given two terms #{(x,p),(y,q)} of #{\textrm{fibre}_f(y)}, we characterise the path type as follows:}

##{
 ((x,p) = (y,q)) \simeq (\Sigma_{(\gamma : x = y)} f(\gamma) \cdot q = p)
}


\proof{
We reason in a chain of equivalences:

##{
\begin{align}
(x,p) = (y,q) &\simeq && \Sigma_{(\gamma : x = y)} \gamma^* p = q \\
      	      &\simeq && \Sigma_{(\gamma : x = y)} f(\gamma) \cdot q = p
\end{align}
}

\ol{
\li{is the characterisation of paths in sigma types}
\li{follows directly from path induction on #{\gamma} and the fact path inversion is an equivalence}
}

% ```agda
\agda{
fibre-pathâ‰ƒ : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} {f : A â†’ B} {b : B} â†’ âˆ€ {x y : fibre f b}
           â†’ (x ï¼ y) â‰ƒ (Î£ (x .fst ï¼ y .fst) Î» Î³ â†’ ap f Î³ âˆ™ y .snd ï¼ x .snd)
fibre-pathâ‰ƒ {x = a@(x , p)} {b@(y , q)}
  = (a ï¼ b)                              â‰ƒâŸ¨ Î£-path eâ»Â¹ âŸ©
    Î£ (x ï¼ y) (Î» Î³ â†’ IdP (ap _ Î³) p q)   â‰ƒâŸ¨ Î£-ap-â‰ƒ lem âŸ©
    Î£ (x ï¼ y) (Î» Î³ â†’ ap _ Î³ âˆ™ q ï¼ p)    â‰ƒâˆ where

  lem2 : âˆ€ {ğ“¤} {A : Type ğ“¤} {x y : A} (p : x ï¼ y) (q : x ï¼ y) â†’ (p ï¼ q) â‰ƒ (q ï¼ p)
  lem2 p q = equivâ†qiso (mk-iso sym (sym , (Î» _ â†’ sym-sym) , Î» _ â†’ sym-sym))

  lem : (Î³ : x ï¼ y) â†’ (IdP (ap _ Î³) p q) â‰ƒ (ap _ Î³ âˆ™ q ï¼ p)
  lem refl = lem2 p q

fibre-pathâ†’ :  âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} {f : A â†’ B} {b : B} â†’ âˆ€ {x y : fibre f b}
           â†’ (Î£ (x .fst ï¼ y .fst) Î» Î³ â†’ ap f Î³ âˆ™ y .snd ï¼ x .snd) â†’ (x ï¼ y)
fibre-pathâ†’ = _â‰ƒ_.bwd fibre-pathâ‰ƒ
}
% ```
}

}
