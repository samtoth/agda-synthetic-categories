\date{2025-04-15}
\title{Dependent Cocones}
\author{samueltoth}
\taxon{Module}

\import{stt-macros}

% ```agda
\agda{
module Foundations.DependentCocone where

open import Foundations.Universes
open import Foundations.Identity
open import Foundations.FunExt
open import Foundations.DependentHomotopy
open import Foundations.DependentIdentity
open import Foundations.Homotopy
open import Foundations.Functions
open import Foundations.CoherentIsomorphism
open import Foundations.Span
open import Foundations.Pushout
}
% ```



\subtree[stt-002K]{
\title{Dependent Cocones}
\taxon{Definition}

% ```agda
\agda{
record Coconeáµˆ {ğ“¤ ğ“¥ ğ“¦} (S : Span ğ“¤ ğ“¥ ğ“¦)
               {ğ“›} {Q : Type ğ“›} (cc : Cocone S Q)
               {ğ“œ} (P : Q â†’ Type ğ“œ) : Type (ğ“¤ âŠ” ğ“¥ âŠ” ğ“¦ âŠ” ğ“› âŠ” ğ“œ) where
  constructor mk-coconeáµˆ
  open Span S
  open Cocone cc renaming (p to p'; q to q'; filler to filler')
  field
    p : (l : Left) â†’ P (p' l)
    q : (r : Right) â†’ P (q' r)
    filler : Homotopyáµˆ (P â—‚ filler') (p âˆ˜ left) (q âˆ˜ right)


module _ {ğ“¤ ğ“¥ ğ“¦} {S : Span ğ“¤ ğ“¥ ğ“¦}
               {ğ“›} {Q : Type ğ“›} {cc : Cocone S Q}
               {ğ“œ} {P : Q â†’ Type ğ“œ}  where
  open Coconeáµˆ
  open Span S
  module cc = Cocone cc

  Dependentâ†Cocone : âˆ€ {ğ“›} {L : Type ğ“›} â†’ Cocone S L â†’ Coconeáµˆ S cc (Î» _ â†’ L)
  Dependentâ†Cocone (mk-cocone p' q' h')
    = mk-coconeáµˆ p' q' Î» a â†’ tr-constant _ _ âˆ™ h' a

  record coconeáµˆ~ (a b : Coconeáµˆ S cc P) : Type (ğ“¤ âŠ” ğ“¦ âŠ” ğ“¥ âŠ” ğ“œ) where
    module a = Coconeáµˆ a
    module b = Coconeáµˆ b
    field
      p~ : a.p ~ b.p
      q~ : a.q ~ b.q
      filler~
        : Homotopyáµˆ
           (Î» c â†’ apâ‚‚ (Idáµˆ ((P â—‚ cc.filler) c)) (p~ (left c)) (q~ (right c)))
           a.filler
           b.filler

  record coconeáµˆ-path (a b : Coconeáµˆ S cc P) : Type (ğ“¤ âŠ” ğ“¦ âŠ” ğ“¥ âŠ” ğ“œ) where
    module a = Coconeáµˆ a
    module b = Coconeáµˆ b
    field
      pï¼ : a.p ï¼ b.p
      qï¼ : a.q ï¼ b.q
      fillerï¼
        : Idáµˆ
            (apâ‚‚ (Homotopyáµˆ (P â—‚ cc.filler)) (ap (_âˆ˜ left) pï¼) (ap (_âˆ˜ right) qï¼))
            a.filler
            b.filler

  from-coconeáµˆ-path : âˆ€ {a b : Coconeáµˆ S cc P} â†’ coconeáµˆ-path a b â†’ a ï¼ b
  from-coconeáµˆ-path record { pï¼ = refl ; qï¼ = refl ; fillerï¼ = refl } = refl
}
% ```
}

% ```agda
\agda{
module _ {ğ“¤ ğ“¥ ğ“¦} (S : Span ğ“¤ ğ“¥ ğ“¦) where
  coconeáµˆ-map : âˆ€ {ğ“› ğ“œ} {C : Type ğ“›} (C-cc : Cocone S C)
                      â†’ {Q : C â†’ Type ğ“œ}
                      â†’ ((c : C) â†’ Q c)
                      â†’ Coconeáµˆ S C-cc Q
  coconeáµˆ-map C f = mk-coconeáµˆ (f âˆ˜ p) (f âˆ˜ q) (apáµˆ f âˆ˜ filler)
    where open Cocone C

  is-pushoutáµˆ : âˆ€ {ğ“›} {C : Type ğ“›} â†’ Cocone S C â†’ Type _
  is-pushoutáµˆ {ğ“›} {C} Cc = âˆ€ {Q : C â†’ Type (ğ“¤ âŠ” ğ“¥ âŠ” ğ“¦ âŠ” ğ“›)}
                           â†’ is-equiv (coconeáµˆ-map Cc {Q})

  is-pushoutÏ‰áµˆ : âˆ€ {ğ“›} {C : Type ğ“›} â†’ Cocone S C â†’ TypeÏ‰
  is-pushoutÏ‰áµˆ {ğ“›} {C} Cc = âˆ€ {ğ“œ} {Q : C â†’ Type ğ“œ}
                            â†’ is-equiv (coconeáµˆ-map Cc {Q})
}
% ```
