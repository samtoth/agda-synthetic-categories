\date{2025-01-14}
\title{Universal elements}
\taxon{Module}
\author{samueltoth}


%```agda
\agda{
open import Foundations.Prelude
open import Algebra.Lattice

module Synthetic.Categories.Universal
  {@â™­ ğ“˜} (@â™­ Î”Â¹ : Type ğ“˜) (@â™­ I : Lattice Î”Â¹) (@â™­ I-distr : is-distributive I)
  where

open import ufAxioms

open Lattice I renaming (0l to i0; 1l to i1)
import Algebra.Lattice.Instances.Polynomial as Poly
open Poly  hiding (L[x]; Î”Â²)
open is-distributive I-distr

private
  Î”Â² = Poly.Î”Â² I
  I[x] = Poly.L[x] I

open import Modalities.Subuniverses
open import Modalities.GlobalSubuniverses
open import Modalities.Instances.Localisation
open import Modalities.Instances.Truncation

open import Ergonomics.Notations.Orthogonality
open import Ergonomics.Extensionality
open import Ergonomics.Auto

open import Core.CanonicalPushouts
open import Core.Arrow
open import Core.Postwhisker
open import Core.PiSection

open import Synthetic.Hom Î”Â¹ i0 i1
open import Synthetic.Categories.Simplicial Î”Â¹ I I-distr
open import Synthetic.Categories.Horns Î”Â¹ I I-distr
open import Synthetic.Categories.Precategories Î”Â¹ I I-distr
open import Synthetic.Categories.Homotopies Î”Â¹ I I-distr
open import Synthetic.Categories.Covariant Î”Â¹ I I-distr
open import Synthetic.Categories.HomFamilies Î”Â¹ I I-distr
open import Synthetic.Categories.Comma Î”Â¹ I I-distr
open import Synthetic.Categories.NaturalTransformation Î”Â¹ I I-distr
}
%```


%```agda
\agda{
Homâ†Id
  : âˆ€ {ğ“¤} {A : Type ğ“¤} â†’ âˆ€ {a b} â†’ a ï¼ b â†’ Hom A a b
Homâ†Id refl = idH _

Hom-gpd
  : âˆ€ {ğ“¤} {A : Type ğ“¤} â†’ is-groupoid A
  â†’ âˆ€ {a b} â†’ is-equiv (Homâ†Id {_}{A}{a}{b})
Hom-gpd gpd {a} {b}
  = is-equiv~âˆ˜ {f = _â‰ƒ_.bwd HomP-reprâ‰ƒ} {g = g âˆ˜ f}
      (Î» {refl â†’ refl})
      (is-equivâ»Â¹ (_â‰ƒ_.has-is-eqv HomP-reprâ‰ƒ))
      (is-equiv-âˆ˜ {f = g} {g = f}
        (total-is-equivâ†fst-is-equiv (gpd tt))
        (is-equivâ»Â¹ (Î£-ï¼singl ._â‰ƒ_.has-is-eqv))) where
  f : a ï¼ b â†’ Î£[ c âˆ¶ _ ] ((c ï¼ a) Ã— (c ï¼ b))
  f = _â‰ƒ_.bwd Î£-ï¼singl
  g : Î£[ c âˆ¶ _ ] ((c ï¼ a) Ã— (c ï¼ b))
    â†’ Î£[ g âˆ¶ (Î”Â¹ â†’ _) ] Î£ (g i0 ï¼ a) (Î» hom2 â†’ g i1 ï¼ b)
  g (a , p , q) = (const _ _ a , p , q)

yo
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {F : A â†’ Type ğ“¥}
    â†’ is-covariant F
    â†’ âˆ€ b (x : F b) â†’ âˆ€ a â†’ Hom _ b a â†’ F a
yo Fc b x a f = tr-cov-hom Fc f x

ev-id
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {F : A â†’ Type ğ“¥}
    â†’ âˆ€ b â†’ (âˆ€ a â†’ Hom _ b a â†’ F a) â†’ F b
ev-id b Î± = Î± b (idH b)

precat-idr : âˆ€ {ğ“¤} {A : Type ğ“¤} (As : is-segal A) {x y}
             â†’ (f : Hom A x y) â†’ (f âˆ˜[ As ] idH _) ï¼ f
precat-idr As f = sym (unique-composite As f (idH _)
  f
  (refl~â–µ f))

precat-idl : âˆ€ {ğ“¤} {A : Type ğ“¤} (As : is-segal A) {x y}
              â†’ (f : Hom A x y) â†’ idH _ âˆ˜[ As ] f ï¼ f
precat-idl = {!!}

precat-assoc
  : âˆ€ {ğ“¤} {A : Type ğ“¤} (Asimp : is-simplicial A) (As : is-segal A)
      {x y z w} (f : Hom _ z w) (g : Hom _ y z) (h : Hom _ x y)
    â†’ (f âˆ˜[ As ] g) âˆ˜[ As ] h ï¼ (f âˆ˜[ As ] (g âˆ˜[ As ] h))
precat-assoc Asi As f g h = {!!}

is-universal
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {F : A â†’ Type ğ“¥}
      â†’ is-covariant F
      â†’ Î£ A F â†’ Type (ğ“˜ âŠ” ğ“¤ âŠ” ğ“¥)
is-universal {F = F} Fcov (a , x)
  = is-fibrewise-equiv (yo Fcov a x)

is-initial : âˆ€ {ğ“¤} {A : Type ğ“¤} â†’ A â†’ Type (ğ“˜ âŠ” ğ“¤)
is-initial a = âˆ€ b â†’ is-singleton (Hom _ a b)

_âŠ£_ : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥}
      â†’ (A â†’ B) â†’ (B â†’ A) â†’ Type (ğ“˜ âŠ” ğ“¤ âŠ” ğ“¥)
l âŠ£ r = âˆ€ a b â†’ Hom _ (l a) b â‰ƒ Hom _ a (r b)


is-ladjâ†is-equiv
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥}
    â†’ (f : A â†’ B) â†’ (fe : is-equiv f)
    â†’ f âŠ£ (is-equiv.bwd fe)
is-ladjâ†is-equiv f fe a b = {!!}

is-initialâ†ladj
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} {a : A}
    â†’ (l : A â†’ B) â†’ (r : B â†’ A) â†’ l âŠ£ r
    â†’ is-initial a â†’ is-initial (l a)
is-initialâ†ladj f g fg ai b
  = is-singleâ†equiv-to-single (fg _ b eâ»Â¹) (ai (g b))

universal-rec
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {F : A â†’ Type ğ“¥}
    â†’ (Fc : is-covariant F)
    â†’ {x : Î£ A F}
    â†’ is-universal Fc x
    â†’ âˆ€ {b} â†’ F b
    â†’ Hom _ (x .fst) b
universal-rec Fc un = is-equiv.bwd (un _)

Hom-âˆ«
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : A â†’ Type ğ“¥} (Bc : is-covariant B)
      {x} (x' : B x) {y} (y' : B y)
    â†’ Hom (Î£ A B) (x , x') (y , y')
    â‰ƒ Î£[ f âˆ¶ Hom A x y ]
        (tr-cov-hom Bc f x' ï¼ y')
Hom-âˆ« {B = B} Bc x' y'
  = Hom-Î£â‰ƒ âˆ™â‰ƒ Î£-ap-â‰ƒ (Î» a â†’ mkâ‰ƒ _ (Hom-cov'-is-equiv B Bc a x' y') eâ»Â¹)

universalâ†initial
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {F : A â†’ Type ğ“¥}
    â†’ (Fc : is-covariant F)
    â†’ {x : Î£ A F}
    â†’ is-initial x
    â†’ is-universal Fc x
universalâ†initial {F = F} Fc {x} init a
  = is-equivâ†is-contr-map Î»
      b â†’ is-singleâ†equiv-to-single
           (Hom-âˆ« Fc (x .snd) b)
           (init (a , b))

Coslice-id-is-initial
  : âˆ€ {ğ“¤} {A : Type ğ“¤} a
  â†’ is-initial {A = Î£ A (Hom _ a)} (a , idH a)
Coslice-id-is-initial = {!!}

initialâ†universal
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {F : A â†’ Type ğ“¥}
    â†’ (Fc : is-covariant F)
    â†’ {x : Î£ A F}
    â†’ is-universal Fc x
    â†’ is-initial x
initialâ†universal {A = A}{F} Fc {x , x'} univ
  = tr is-initial
       lem-id
       (is-initialâ†ladj (total-map (yo Fc x x')) _
         (is-ladjâ†is-equiv _ (is-total-equivâ†is-fibrewise-equiv univ))
         (Coslice-id-is-initial x)) where
  lem : Î£[ z âˆ¶ A ] (Hom _ x z) â‰ƒ Î£ A F
  lem = mkâ‰ƒ _ (is-total-equivâ†is-fibrewise-equiv univ)

  lem-id : total-map (yo Fc x x') (x , idH _) ï¼ (x , x')
  lem-id = Î£-pathâ†’ (refl , tr-cov-idH F Fc x')

fundamental-Cov
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {F : A â†’ Type ğ“¥} (Fc : is-covariant F)
      x
    â†’ (f : âˆ€ a â†’ Hom A x a â†’ F a)
    â†’ is-initial {A = Î£ A F} (x , f x (idH x))
    â‡” is-fibrewise-equiv f
fundamental-Cov Fc x f = {!!}



-- equiv-pres-initial
--   : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} (f : A â†’ B)
--     â†’ is-equiv f
--     â†’ âˆ€ x â†’ is-initial x â†’ is-initial (f x)
-- equiv-reflects-initial = {!!}

unit-NTâ†section
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥}
    â†’ (l : A â†’ B) (r : B â†’ A)
    â†’ (r âˆ˜ l ~ id)
    â†’ id â‡’ r âˆ˜ l
unit-NTâ†section l r H a = adjust-hom refl (sym (H a)) (idH a)

left-adjointâ†NT-sec
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥}
    â†’ is-segal A â†’ is-segal B
    â†’ (l : A â†’ B) (r : B â†’ A)
    â†’ section-witness r l
    â†’ (Îµ : l âˆ˜ r â‡’ id) â†’ l âŠ£ r
left-adjointâ†NT-sec As Bs l r p Îµ a b ._â‰ƒ_.fwd f
  = ap-hom r f âˆ˜[ As ] unit-NTâ†section l r p a
left-adjointâ†NT-sec As Bs l r p Îµ a b ._â‰ƒ_.has-is-eqv
  = is-equivâ†qiso
      ( (Î» f â†’ Îµ b âˆ˜[ Bs ] ap-hom l f)
      , (Î» f â†’
  Îµ b âˆ˜[ Bs ] ap-hom l (ap-hom r f âˆ˜[ As ] unit-NTâ†section l r p a) ï¼âŸ¨ {!!} âŸ©
  Îµ b âˆ˜[ Bs ] (ap-hom l (ap-hom r f) âˆ˜[ Bs ] ap-hom l (unit-NTâ†section l r p a))
    ï¼âŸ¨ {!!} âŸ©
  Îµ b âˆ˜[ Bs ] {!f âˆ˜[ Bs ] ?!} ï¼âŸ¨ {!!} âŸ©
  f âˆ)
      , Î» aâ‚ â†’ {!!})

record left-adjoint-section'
  {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} (r : B â†’ A)
  : Type (ğ“˜ âŠ” ğ“¤ âŠ” ğ“¥) where
  field
    sec : A â†’ B
    Î· : id ~ r âˆ˜ sec
    Î·-univ
      : âˆ€ {a b} â†’ is-equiv ( adjust-hom (sym (Î· a)) (refl {a = r b}) âˆ˜ ap-hom r)

  adjâ†lasec : sec âŠ£ r
  adjâ†lasec a b = mkâ‰ƒ (adjust-hom (sym (Î· a)) refl âˆ˜ ap-hom r) Î·-univ

-- open left-adjoint-section'

record left-adjoint-section
  {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} (r : B â†’ A)
  : Type (ğ“˜ âŠ” ğ“¤ âŠ” ğ“¥) where
  field
    sec : A â†’ B
    Î· : id ~ r âˆ˜ sec
    Îµ : sec âˆ˜ r â‡’ id
    Îµ-left : âˆ€ x â†’ Hom-pathP (ap sec (Î· x)) refl  (idH (sec x)) (Îµ (sec x))
    Îµ' : sec âˆ˜ r â‡’ id
    Îµ'-right : âˆ€ x â†’ Hom-pathP (Î· (r x)) refl (idH (r x)) (ap-hom r (Îµ' x))

record left-adjoint-Î 
  {ğ“¤ ğ“¥} (A : Type ğ“¤) (B : A â†’ Type ğ“¥) : Type (ğ“˜ âŠ” ğ“¤ âŠ” ğ“¥) where
  field
    Î· : Î  A B
    Îµ : Î· âˆ˜ fst {B = B} â‡’ snd
    Îµ-left : âˆ€ x â†’ Hom-path (idH (Î· x)) (Îµ (x , Î· x))

left-adjoint-sectionâ†left-adjoint-Î 
  : âˆ€ {ğ“¤ ğ“¥} (A : Type ğ“¤) (B : A â†’ Type ğ“¥)
    â†’ left-adjoint-Î  A B
    â†’ left-adjoint-section (fst {B = B})
left-adjoint-sectionâ†left-adjoint-Î  A B la = las where
  module L = left-adjoint-Î  la

  las : left-adjoint-section fst
  las .left-adjoint-section.sec a = (a , L.Î· a)
  las .left-adjoint-section.Î· = ~refl
  las .left-adjoint-section.Îµ (a , b) = Hom-Î£ (idH a , L.Îµ (a , b))
  las .left-adjoint-section.Îµ-left a = Hom-pathPâ†path
    (Hom-Î£-pathâ†’ Hom-path-refl {!!})
  las .left-adjoint-section.Îµ' (a , b) = Hom-Î£ (idH a , L.Îµ (a , b))
  las .left-adjoint-section.Îµ'-right (a , b)
    = Hom-pathPâ†path
       {f = idH a}
       {g = ap-hom fst (Hom-Î£ (idH a , L.Îµ (a , b)))}
       (IdSâ†Id â¦ƒ IdS-Hom â¦„ (sym (Hom-Î£-ap-fst-Î² (idH a) (L.Îµ (a , b)))))

record bi-diagramatic-adjunction
  {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥}
  (l : A â†’ B) (r : B â†’ A)
  : Type (ğ“˜ âŠ” ğ“¤ âŠ” ğ“¥) where
  field
    Î· : id â‡’ r âˆ˜ l
    Îµ : l âˆ˜ r â‡’ id
    Îµ-left : âˆ€ x â†’ Hom2 (Îµ (l x)) (ap-hom l (Î· x)) (idH (l x))
    Îµ' : l âˆ˜ r â‡’ id
    Îµ'-right : âˆ€ y â†’ Hom2 (ap-hom r (Îµ' y)) (Î· (r y)) (idH (r y))

Hom2â†Hom-pathP
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} {f g : A â†’ B}
      (Î· : f ~ g) (h : g  â‡’ f)
   â†’ âˆ€ x
   â†’ Hom-pathP (Î· x) refl (idH (f x)) (h x)
   â†’ Hom2 (h x) (Homâ†Id (Î· x)) (idH _)
Hom2â†Hom-pathP {f = f} = funext-rec _ (Î» where
  refl h x p â†’ help x h (Hom-extâ†’ (Hom-pathâ†pathP p) )) where
  help : âˆ€ x (h : f â‡’ f) â†’ (idH (f x)) ï¼ h x â†’ Hom2 (h x) (idH (f x)) (idH (f x))
  help x h p = tr (Î» p â†’ Hom2 p _ _) p (refl~â–µ (idH _))

Homâ†Id-ap
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} {f : A â†’ B}
      {x y} (p : x ï¼ y) â†’ Homâ†Id (ap f p) ï¼ ap-hom f (Homâ†Id p)
Homâ†Id-ap refl = refl

bi-diagramaticâ†left-adjoint-section
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥}
      (r : A â†’ B)
    â†’ (s : left-adjoint-section r)
    â†’ bi-diagramatic-adjunction (s .left-adjoint-section.sec) r
bi-diagramaticâ†left-adjoint-section r s = adj where
  open bi-diagramatic-adjunction
  module s = left-adjoint-section s

  adj : bi-diagramatic-adjunction (s.sec) r
  adj .Î· x = Homâ†Id (s.Î· x)
  adj .Îµ = s.Îµ
  adj .Îµ-left x = tr (Î» p â†’ Hom2 _ p (idH _))
                     (Homâ†Id ((s.sec â—‚ s.Î·) x) ï¼âŸ¨ Homâ†Id-ap (s.Î· x) âŸ©
                     ap-hom s.sec (Homâ†Id (s.Î· x)) âˆ)
                     (Hom2â†Hom-pathP (s.sec â—‚ s.Î·) (s.Îµ âˆ˜ s.sec) x (s.Îµ-left x))
  adj .Îµ' = s.Îµ'
  adj .Îµ'-right y = Hom2â†Hom-pathP (s.Î· âˆ˜ r) (ap-hom r âˆ˜ s.Îµ') y (s.Îµ'-right y)


-- ev0-lari'
--   : âˆ€ {ğ“¤} {A : Type ğ“¤}
--   â†’ is-segal A
--   â†’ left-adjoint-section (ev {B = Î» _ â†’  A} i0)
-- ev0-lari' As .left-adjoint-section'.sec = const _ _
-- ev0-lari' As .left-adjoint-section'.Î· = ~refl
-- ev0-lari' As .left-adjoint-section'.Î·-univ {a} {b} = is-equivâ†qiso
--   ( (Î» f â†’ Homâ†NT (Î» i â†’ mk-hom (Î» j â†’ b (i âˆ§ j)) {!!} {!!} âˆ˜[ As ] f))
--   , {!!}
--   , {!!})

ap-ev : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥} {f g : A â†’ B} (p : f ~ g)
          {i : A}
      â†’ ap (ev i) (funextâ†’ p) ï¼ p i
ap-ev = funext-rec _ (Î» where refl â†’ ap (ap (ev _)) funext-refl)

ev0-lari
  : âˆ€ {ğ“¤} {A : Type ğ“¤}
  â†’ is-segal A
  â†’ left-adjoint-section (ev {B = Î» _ â†’  A} i0)
ev0-lari {A = A} As .left-adjoint-section.sec = const A Î”Â¹
ev0-lari {A = A} As .left-adjoint-section.Î· = ~refl
ev0-lari {A = A} As .left-adjoint-section.Îµ a
  = Homâ†NT Î» i â†’ mk-hom (Î» j â†’ a (i âˆ§ j))
           (ap a (âˆ§-comm âˆ™ 0-init))
           (ap a 1-top)
ev0-lari {A = A} As .left-adjoint-section.Îµ-left x
  = ~refl
  , Square-degen-vert _ _ (sym (ap funextâ†’ (funextâ†’ Î» _ â†’ ap-const _)
                               âˆ™ funext-refl))
  , Square-degen-vert _ _ (sym (ap funextâ†’ (funextâ†’ Î» _ â†’ ap-const _)
                               âˆ™ funext-refl))
ev0-lari {A = A} As .left-adjoint-section.Îµ' a
  = Homâ†NT Î» i â†’ mk-hom (Î» j â†’ a (i âˆ§ j))
           (ap a (âˆ§-comm âˆ™ 0-init))
           (ap a 1-top)
ev0-lari {A = A} As .left-adjoint-section.Îµ'-right x
  = (x â—‚ (Î» _ â†’ sym 0-init))
  , Square-left-whisker x refl refl refl (ap-ev _)
      (Square-degen-diag _ _ (is-prop-separated _ _ _ _))
  , Square-left-whisker x refl refl refl (ap-ev _)
      (Square-degen-diag _ _ (is-prop-separated _ _ _ _))

section-pullback
  : âˆ€ {ğ“¤ ğ“¥ ğ“¦ ğ“œ} {A : Type ğ“¤} {B : Type ğ“¥} {X : Type ğ“¦} {Y : Type ğ“œ}
      {f : A â†’ B} {g : X â†’ Y} (F : Arrow-map f g)
    â†’ is-cartesian F
    â†’ section g
    â†’ section f
section-pullback {f = f} {g} F fcart
  = sectionâ†Î -map {p = f}
  âˆ˜ precomp-Î  Fc.bwd
  âˆ˜ postcomp-Î  _ F.bot
  âˆ˜ Î â†section-map where
  module F = Arrow-map F
  module Fc a = is-equiv (fcart a)

opaque
  lari-pullback-fam
    : âˆ€ {ğ“¤ ğ“¥ ğ“¦} {A : Type ğ“¤} {P : A â†’ Type ğ“¥} {Q : A â†’ Type ğ“¦}
      â†’ left-adjoint-Î  A Q
      â†’ left-adjoint-Î  (Î£ A P) (Î» x â†’ Q (fst x))
  lari-pullback-fam lap .left-adjoint-Î .Î· (a , p) = lap .left-adjoint-Î .Î· a
  lari-pullback-fam lap .left-adjoint-Î .Îµ ((a , p) , q)
    = lap .left-adjoint-Î .Îµ (a , q)
  lari-pullback-fam lap .left-adjoint-Î .Îµ-left (a , p)
    = lap .left-adjoint-Î .Îµ-left a

  lari-pullback
    : âˆ€ {ğ“¤ ğ“¥ ğ“¦ ğ“œ} {A : Type ğ“¤} {B : Type ğ“¥} {X : Type ğ“¦} {Y : Type ğ“œ}
        {f : A â†’ B} {g : X â†’ Y} (F : Arrow-map f g)
      â†’ is-cartesian F
      â†’ left-adjoint-section g
      â†’ left-adjoint-section f
  lari-pullback {f = f}{g} F cart gs = fs where
    open left-adjoint-section

    section-f : section f
    section-f = section-pullback F cart (sec gs , sym âˆ˜ Î· gs)

    fs : left-adjoint-section f
    fs .sec = section-f .fst
    fs .Î· = sym âˆ˜ section-f .snd
    fs .Îµ = {!!}
    fs .Îµ-left = {!!}
    fs .Îµ' = {!!}
    fs .Îµ'-right = {!!}

HomğŸ™-is-single : is-singleton (Hom ğŸ™ tt tt)
HomğŸ™-is-single = is-singleâ†equiv-to-single
  (total-hom âˆ™â‰ƒ Î£-singl ğŸ™-is-singleton tt âˆ™â‰ƒ Î£-singl ğŸ™-is-singleton tt)
  (is-singleton-Î  {A = Î”Â¹} {B = Î» _ â†’ ğŸ™} Î» _ â†’ ğŸ™-is-singleton)
  -- = tr is-initial {!!}
  --    (initialâ†lari-!
  --      (Simp.Î£-is-simplicial asi Î» _
  --        â†’ Simp.Î -is-simplicial (Î» _ â†’ {!!}))
  --      (is-segal-cov-Î£ as
  --        (is-covariantâ‡”is-left-fibration _ .snd
  --          (coslice-is-leftâ‡”is-precategory asi .fst as a)))
  --      (lari-pullback {f = ! {A = Coslice _ (const _ _ a)}} {g = ev i0}
  --                     coslice-square coslice-square-is-cartesian (ev0-lari as)))
  -- where
  -- coslice-square : Arrow-map ! (ev i0)
  -- coslice-square .Arrow-map.top (_ , p) = p tt .HomP.hom
  -- coslice-square .Arrow-map.bot _ = a
  -- coslice-square .Arrow-map.comm (a , p) = sym (p tt .HomP.hom0)

  -- coslice-square-is-cartesian : is-cartesian coslice-square
  -- coslice-square-is-cartesian = is-cartesianâ†gap-is-equiv _
  --   (is-equivâ†qiso
  --     ((Î» where (a , b , p) â†’ (b i1 , Î» _ â†’ mk-hom b (sym p) refl))
  --     , (Î» where (a , p) â†’ Coslice-pathâ†’ ((p tt .HomP.hom1)
  --                          , (Î» i â†’ (~refl
  --                                   , Square-degen-vert _ _ sym-sym
  --                                   , Square-flatten-hor refl))))
  --     , Î» where (a , b , p) â†’ pullback-pathâ†’
  --                                (refl , refl , sym (âˆ™-reflr _ âˆ™ sym-sym))))

tr-cov-is-equiv
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤}
      (Asimp : is-simplicial A)
      (Apc : is-segal A)
      {F : A â†’ Type ğ“¥}
    â†’ (Fc : is-covariant F)
    â†’ is-fibrewise-equiv (ev-id {F = F})
tr-cov-is-equiv Asimp Apc {F = F} Fc a = {!!}
  -- = is-equivâ†qiso
  -- (yo {F = F} Fc a
  -- , (Î» Î± â†’ funextâ†’ Î» a' â†’ funextâ†’ Î» f â†’
  --   (yo Fc a (Î± a (idH a)) a' f)
  --           ï¼âŸ¨âŸ©
  --   tr-cov-hom Fc f (Î± a (idH a))
  --           ï¼âŸ¨  tr-naturality Ahomcov Fc Î± f (idH _) âŸ©
  --   Î± a' (tr-cov-hom Ahomcov f (idH a))
  --                           ï¼âŸ¨ ap (Î± a') (tr-hom-cov Asimp Apc f (idH a)) âŸ©
  --   Î± a' (f âˆ˜[ Apc ] idH a) ï¼âŸ¨ ap (Î± a') (precat-idr Apc f) âŸ©
  --   Î± a' f âˆ)
  -- , (Î» x â†’ tr-cov-idH F Fc x)) where
  -- Ahomcov = hom-fam-is-covâ‡”is-strongly-segal .snd
  --               (is-strongly-segalâ†is-segal Asimp Apc) a


adjunctionâ†bi-diagramatic
  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : Type ğ“¥}
      (Asimp : is-simplicial A) (Bsimp : is-simplicial B)
      (As : is-segal A) (Bs : is-segal B)
    â†’ (l : A â†’ B) (r : B â†’ A)
    â†’ bi-diagramatic-adjunction l r
    â†’ l âŠ£ r
adjunctionâ†bi-diagramatic Asi Bsi As Bs l r bd a b = mkâ‰ƒ eq-fwd {!!} where
  open bi-diagramatic-adjunction bd

  fam-cov : is-covariant Î» y â†’ Hom _ a (r y)
  fam-cov = {!!}

  eqv : ((b : _) â†’ Hom _ (l a) b â†’ Hom _ a (r b)) â‰ƒ (Hom _ a (r (l a)))
  eqv = mkâ‰ƒ (ev-id (l a)) (tr-cov-is-equiv Bsi Bs fam-cov (l a))

  eq-fwd : Hom _ (l a) b â†’ Hom _ a (r b)
  eq-fwd f = ap-hom r f âˆ˜[ As ] Î· a

  left-inv : section eq-fwd
  left-inv .fst g = Îµ' b âˆ˜[ Bs ] ap-hom l g
  left-inv .snd g
    = (ap-hom r (Îµ' b âˆ˜[ Bs ] ap-hom l g) âˆ˜[ As ] Î· a)
        ï¼âŸ¨ ap (_âˆ˜[ As ] Î· a) {!!} âŸ©
      ((ap-hom r (Îµ' b) âˆ˜[ As ] (ap-hom r (ap-hom l g))) âˆ˜[ As ] Î· a)
        ï¼âŸ¨ precat-assoc Asi As _ _ _  âŸ©
      (ap-hom r (Îµ' b) âˆ˜[ As ] ((ap-hom r (ap-hom l g)) âˆ˜[ As ] Î· a))
        ï¼âŸ¨ ap (ap-hom r (Îµ' b) âˆ˜[ As ]_) {! {- NATURALITY -} !} âŸ©
      (ap-hom r (Îµ' b) âˆ˜[ As ] (Î· (r b) âˆ˜[ As ] g))
        ï¼âŸ¨ sym (precat-assoc Asi As _ _ _) âŸ©
      (ap-hom r (Îµ' b) âˆ˜[ As ] Î· (r b)) âˆ˜[ As ] g
        ï¼âŸ¨ ap (_âˆ˜[ As ] g) (sym (unique-composite As _ _ (idH _) (Îµ'-right b))) âŸ©
      idH _ âˆ˜[ As ] g ï¼âŸ¨ precat-idl As g âŸ©
      g âˆ

opaque
  fibre-lari-initial
    : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤} {B : A â†’ Type ğ“¥}
      â†’ is-simplicial A â†’ is-segal A
      â†’ (s : left-adjoint-Î  A B)
      â†’ âˆ€ a â†’ is-initial {A = B a} (s .left-adjoint-Î .Î· a)
  fibre-lari-initial asi as s a b = mk-singl (L.Îµ (a , b)) {!!} where
    module L = left-adjoint-Î  s

opaque
  initialâ†lari-!
    : âˆ€ {ğ“¤} {A : Type ğ“¤}
      â†’ is-simplicial A â†’ is-segal A
      â†’ (s : left-adjoint-section (! {A = A}))
      â†’ is-initial (s .left-adjoint-section.sec tt)
  initialâ†lari-! asimp as s a = is-singleâ†equiv-to-single
    (adjunctionâ†bi-diagramatic Simp.ğŸ™âˆˆS asimp Segal.ğŸ™âˆˆS as _ !
      (bi-diagramaticâ†left-adjoint-section ! s) tt a eâ»Â¹ )
    HomğŸ™-is-single


-- R17 lemma 9.8
coslice-initial
  : âˆ€ {ğ“¤} {A : Type ğ“¤} {a : A}
    â†’ is-simplicial A
    â†’ is-segal A
    â†’ is-initial {A = Î£ A (Hom _ a)} (a , idH a)
coslice-initial {a = a} asi as (b , f)
  = {!!}

}
%```
