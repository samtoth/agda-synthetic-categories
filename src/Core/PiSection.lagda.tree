\date{2025-06-26}
\author{samueltoth}
\title{Pi types as sections}
\taxon{module}
\meta{module}{\startverb Core.PiSection \stopverb}
\import{stt-macros}


%```agda
\agda{
module Core.PiSection where

open import Foundations.Prelude
open import ufAxioms
}
%```


\subtree[stt-006J]{
\taxon{theorem}
\title{Pi types are sections}

\p{We show that the type #{\Pi_{(a : A)} B(a)} is equivalent to
the type of sections of #{\pi : \Sigma_{(a : A)} B(a)}.}


%```agda
\agda{
sectionâ†Î  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤}
              {B : A â†’ Type ğ“¥}
            â†’ Î  _ B
            â†’ section (fst {B = B})
sectionâ†Î  {B = B} f = ((Î» x â†’ (x , f x)) , ~refl)


sectionâ‰ƒÎ  : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤}
              {B : A â†’ Type ğ“¥}
            â†’ section (fst {B = B})
            â‰ƒ Î  _ B
sectionâ‰ƒÎ  {A = A} {B}
  = section fst                                  â‰ƒâŸ¨ Î£-Î -swapâ‰ƒ _ _ eâ»Â¹ âŸ©
    (âˆ€ (a : A) â†’ Î£[ x âˆ¶ Î£ A B ] (fst x ï¼ a))    â‰ƒâŸ¨ Î -ap-â‰ƒ (Î» a â†’ Î£-assoc) âŸ©
    ((a : A) â†’ Î£[ a'Â âˆ¶ A ] ((B a') Ã— (a' ï¼ a))) â‰ƒâŸ¨ Î -ap-â‰ƒ (Î» a
                                                    â†’ Î£-ap-â‰ƒ (Î» a' â†’ Ã—-swap)) âŸ©
    (((a : A) â†’ Î£[ a'Â âˆ¶ A ] ((a' ï¼ a) Ã— B a'))) â‰ƒâŸ¨ Î -ap-â‰ƒ (Î» a â†’ Î£-ï¼singl) âŸ©
    Î  A B â‰ƒâˆ

Î â†section : âˆ€ {ğ“¤ ğ“¥} {A : Type ğ“¤}
              {B : A â†’ Type ğ“¥}
            â†’ section (fst {B = B})
            â†’ Î  _ B
Î â†section {B = B} (f , s) a = tr B (s a) (snd (f a))
}
%```
}
